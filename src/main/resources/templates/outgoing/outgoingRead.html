<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<body>
<div class="page-inner" layout:fragment="content">
  <div class="page-header">
    <h3 class="fw-bold mb-3">ì…/ì¶œê³  ê´€ë¦¬</h3>
    <ul class="breadcrumbs mb-3">
      <li class="nav-home">
        <a href="#">
          <i class="icon-home"></i>
        </a>
      </li>
      <li class="separator">
        <i class="icon-arrow-right"></i>
      </li>
      <li class="nav-item">
        <a href="#">ì…/ì¶œê³  ê´€ë¦¬</a>
      </li>
      <li class="separator">
        <i class="icon-arrow-right"></i>
      </li>
      <li class="nav-item">
        <a href="#">ì¶œê³  ì¡°íšŒ</a>
      </li>
    </ul>
  </div>
  <div class="row">
    <div class="col-md-12">
      <div class="card border-success">
        <div class="card-header bg-danger text-white text-center">
          <h4 class="card-title m-0">ğŸ„ ì¶œê³  ì¡°íšŒ ğŸ…</h4>
        </div>
<!--        <div class="card-body bg-white">-->
<!--           í•„í„° ì„¹ì…˜ -->
<!--          <div class="p-3 bg-light border rounded">-->
<!--            <div class="row g-3">-->
<!--              &lt;!&ndash; ì¶œê³ ì¼ì / ì…ê³ ->ì¶œê³ &ndash;&gt;-->
<!--              <div class="col-md-6 d-flex align-items-center">-->
<!--                <label for="start-date" class="form-label fw-bold text-success me-2 mb-0">ì¶œê³ ì¼ì</label>-->
<!--                <input type="date" id="start-date" class="form-control w-50 me-2">-->
<!--                <input type="date" id="end-date" class="form-control w-25 me-2">-->
<!--                <button class="btn btn-danger">ê²€ìƒ‰</button>-->
<!--              </div>-->

<!--              &lt;!&ndash; ì¹´í…Œê³ ë¦¬ &ndash;&gt;-->
<!--              <div class="col-md-6 d-flex align-items-center">-->
<!--                <label for="category" class="form-label fw-bold text-success me-2 mb-0">ì¹´í…Œê³ ë¦¬</label>-->
<!--                <input type="text" id="category" class="form-control w-75 me-2">-->
<!--                <button class="btn btn-danger">ê²€ìƒ‰</button>-->
<!--              </div>-->

<!--              &lt;!&ndash; ì°½ê³  &ndash;&gt;-->
<!--              <div class="col-md-6 d-flex align-items-center">-->
<!--                <label for="warehouse" class="form-label fw-bold text-success me-2 mb-0">ì°½ê³ </label>-->
<!--                <input type="text" id="warehouse" class="form-control w-75 me-2">-->
<!--                <button class="btn btn-danger">ê²€ìƒ‰</button>-->
<!--              </div>-->

<!--              &lt;!&ndash; ì§€ì  &ndash;&gt;-->
<!--              <div class="col-md-6 d-flex align-items-center">-->
<!--                <label for="branchName" class="form-label fw-bold text-success me-2 mb-0">ì§€ì </label>-->
<!--                <input type="text" id="branchName" class="form-control w-75 me-2">-->
<!--                <button class="btn btn-danger">ê²€ìƒ‰</button>-->
<!--              </div>-->

<!--            </div>-->
<!--          </div>-->
<!--        </div>-->
      </div>
    </div>
  </div>
  <div class="card-body">
    <div class="table-responsive">
      <table
              id="basic-datatables"
              class="display table table-striped table-hover"
      >
        <thead>
        <tr>
          <th>ì¶œê³ ID</th>
          <th>ì£¼ë¬¸ID</th>
          <th>ì¶œê³ ë‚ ì§œ</th>
          <th>ì¶œê³ ìƒíƒœ</th>
          <th>ì°½ê³ ì´ë¦„</th>
          <th>ì§€ì ì´ë¦„</th>
          <th>ì¹´í…Œê³ ë¦¬</th>
          <th>ìƒí’ˆëª…</th>
          <th>ì¶œê³ ìˆ˜ëŸ‰</th>
          <th>ìƒí’ˆê°€ê²©</th>
          <th>ì´ê°€ê²©</th>
        </tr>
        </thead>
        <tbody>
        <!-- ë°˜ë³µë¬¸ -->
        <tr th:each="OutgoingDTO : ${list}">
          <th th:text="${OutgoingDTO.outgoingId}" class="text-center"></th>
          <td th:text="${OutgoingDTO.orderId}" class="text-center"></td>
          <td th:text="${OutgoingDTO.outgoingDate}"  class="text-center"></td>
          <td th:text="${OutgoingDTO.outgoingStatus}"  class="text-center"></td>
          <td th:text="${OutgoingDTO.warehouseName}"  class="text-center"></td>
          <td th:text="${OutgoingDTO.branchName}"  class="text-center"></td>
          <td th:text="${OutgoingDTO.productCategory}"  class="text-center"></td>
          <td th:text="${OutgoingDTO.productName}"  class="text-center"></td>
          <td th:text="${OutgoingDTO.outgoingQuantity}"  class="text-center"></td>
          <td th:text="${OutgoingDTO.productPrice}"  class="text-center"></td>
          <td th:text="${OutgoingDTO.totalPrice}"  class="text-center"></td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

</body>
<th:block layout:fragment="script">
  <script>
    function readBranch() {
      const branchName = document.getElementById("branchName").value;
      let tbody = document.getElementById("tbody");
      axios.post("/outgoing/readBranch", {
        branchName: branchName
      }).then(function (response) {
        console.log(response.data);
        let json_array = response.data; //[json, json, json]
        console.log(json_array)
        let body = "";
        for (let i  = 0;  i< json_array.length; i++) {
          console.log(json_array[i]);
          let json = json_array[i];
          body = body + `
                              <tr>
                                <td class="text-center">${json.outgoingId}</td>
                                <td class="text-center">${json.orderId}</td>
                                <td class="text-center">${json.outgoingDate}</td>
                                <td class="text-center">${json.outgoingStatus}</td>
                                <td class="text-center">${json.warehouseName}</td>
                                <td class="text-center">${json.branchName}</td>
                                <td class="text-center">${json.productCategory}</td>
                                <td class="text-center">${json.productName}</td>
                                <td class="text-center">${json.outgoingQuantity}</td>
                                <td class="text-center">${json.productPrice}</td>
                                <td class="text-center">${json.totalPrice}</td>
                            </tr>
                    `;
        }

        tbody.innerHTML = body;
      })
    }

    function readCategory() {
      const branchName = document.getElementById("category").value;
      let tbody = document.getElementById("tbody");
      axios.post("/outgoing/readCategory", {
        category: category
      }).then(function (response) {
        console.log(response.data);
        let json_array = response.data; //[json, json, json]
        console.log(json_array)
        let body = "";
        for (let i  = 0;  i< json_array.length; i++) {
          console.log(json_array[i]);
          let json = json_array[i];
          body = body + `
                              <tr>
                                <td class="text-center">${json.outgoingId}</td>
                                <td class="text-center">${json.orderId}</td>
                                <td class="text-center">${json.outgoingDate}</td>
                                <td class="text-center">${json.outgoingStatus}</td>
                                <td class="text-center">${json.warehouseName}</td>
                                <td class="text-center">${json.branchName}</td>
                                <td class="text-center">${json.productCategory}</td>
                                <td class="text-center">${json.productName}</td>
                                <td class="text-center">${json.outgoingQuantity}</td>
                                <td class="text-center">${json.productPrice}</td>
                                <td class="text-center">${json.totalPrice}</td>
                            </tr>
                    `;
        }

        tbody.innerHTML = body;
      })
    }

    //$(document).ready(function () {
    $("#basic-datatables").DataTable({});
    // });
  </script>
</th:block>
</html>>